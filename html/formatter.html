<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="../vendor/materialize/css/materialize.css" rel="stylesheet" type="text/css">
<link href="../vendor/jsoneditor/css/jsoneditor.css" rel="stylesheet" type="text/css">
<link href="../vendor/icon/main.css" rel="stylesheet" >
<link href="../css/common.css" rel="stylesheet" >

<script src="../vendor/jquery/jquery-3.2.1.min.js"></script>
<script src="../vendor/materialize/js/materialize.js"></script>
<script src="../vendor/jsoneditor/js/jsoneditor.min.js"></script>

</head>
<body>

	<div id="menu">
		<nav>
			<div class="nav-wrapper">
				<a href="#!" class="brand-logo">&nbsp; &nbsp;
				<img alt="logo" src="../images/logo.png" width="60px" style="padding-top: 12px;"></a> 
				<a href="#" data-target="mobile-demo" class="sidenav-trigger">
					<i class="material-icons">menu</i>
				</a>
				<ul class="right hide-on-med-and-down">
					<li><a href="formatter.html">Formatter</a></li>
					<li><a href="difference.html">Difference</a></li>
				</ul>
			</div>
		</nav>
	
		<ul class="sidenav" id="mobile-demo">
			<li><a href="formatter.html">Formatter</a></li>
			<li><a href="difference.html">Difference</a></li>
		</ul>
	</div>

	<div class="container-fluid">
		<h5 class="center">Formatter</h5>
		<div class="row">
			<div class="col s10"></div>
			<div class="col s1">
				
			</div>
			<div class="col s1">
				<div class="input-field">
					<select id="mode" name="mode">
						<option value="code">Code</option>
						<option value="tree">Tree</option>
					</select>
					<label for="mode" class="input-index">Mode</label>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col s12">
				<div id="jsoneditor" class="jsoneditor_wrapper"></div>
			</div>
		</div>
	</div>

	<script>
		var container, options, json, editor;

		container = document.getElementById('jsoneditor');

		options = {
			mode : 'code',
			//modes : [ 'code', 'tree'], // allowed modes
			onError : function(err) {
				console.error(err);
				alert(err.toString());
			},
			onChange : function() {
				console.log('onChange');
			},
			/*onChangeJSON : function(json) {
				console.log('onChangeJSON', json);

				// test feedback loop which is typical in React -> should not change anything
				editor.update(json)
			},*/
			onChangeText : function(text) {
				console.log('onChangeText', text);
			},
			onFocus : function(event) {
				console.log('Focus : ', event);
			},
			onBlur : function(event) {
				console.log('Blur : ', event);
			},
			indentation : 4,
			// escapeUnicode: true,
			limitDragging : true,
			language: "en"
		};

		json = {};

		editor = new JSONEditor(container, options, json);

		/*console.log('json', json);
		console.log('string', JSON.stringify(json));

		const update = document.getElementById('update')
		update.onclick = function () {
		  const json2 = {
		    "array": [1, 2, [3,4,5]],
		    "array2": [1, 2, [3,4,5]],
		    "url": "http://jsoneditoronline.org",
		    "boolean": true,
		    "color": "#82b92c",
		    "htmlcode": '&quot;',
		    "escaped_unicode": '\\u20b9',
		    "unicode": '\u20b9,\uD83D\uDCA9',
		    "return": '\n',
		    "null": null,
		    "number": 123,
		    "object": {"a": "b", "c": "d"},
		    "string": "Hello World",
		    "timestamp": 1534952749890
		  };

		  editor.update(json2)
		}*/

		$(document).ready(function() {
			$('.sidenav').sidenav();
			
			$('select').formSelect();
			
			$("#mode").change(function(){
				
				editor.setMode($(this).val());
				
				if($(this).val() === "code") {
					$("#format").removeClass("disabled");
				} else {
					$("#format").addClass("disabled");
				}
			});
		});
	</script>
</body>
</html>
